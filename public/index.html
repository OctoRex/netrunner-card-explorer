<!DOCTYPE>
<html>
  <head>
    <title>BlacKat | Netrunner Card Explorer</title>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular-cookies.js"></script>
    <script type="text/javascript" src="js/data.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Rajdhani' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="css/app.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  </head>
  <body ng-app="app">
    <div id+"display">
      <div id="controls" ng-controller="ControlsCtrl">
        <h2 id="title">BlacKat</h2>
        <div id="sides">
          <a href="javascript:void(0);" class="btn btn-link btn-lg" ng-click="changeSide('corp')"><h4 ng-class="{'text-muted': currentSide != 'corp', 'text-primary': currentSide == 'corp'}" >Corp</h4></a>
          <a href="javascript:void(0);" class="btn btn-link btn-lg" ng-click="changeSide('runner')"><h4 ng-class="{'text-muted': currentSide != 'runner', 'text-primary': currentSide == 'runner'}">Runner</h4></a>
        </div>
        <div id="sort" class="form-group">
          <select class="form-control" ng-model="sortOption" ng-options="option.value as option.title for option in sortOptions | filter:{side:currentSide}" ng-change="changeSort()"></select>
        </div>
        <div id="search" class="form-group">
          <input class="form-control" type="text" ng-model="search.term" ng-change="setSearch()" placeholder="search" />
        </div>
        <h4 ng-click="showFactions = !showFactions;" ng-class="{active: showFactions}">Factions
          <span ng-if="factions.all.length != factions.selected.length"> &bull;</span></span></h4>
        <div id="factions" ng-show="showFactions">
          <div class="mass-selector">
            <span ng-click="allFactions();">All</span> | <span ng-click="noFactions()">None</span> 
          </div>
          <hr class="filter-divider" />
          <div class="checkbox" ng-repeat="faction in factions.all | filter:{side:currentSide}">
            <label>
              <input type="checkbox" ng-model="faction.selected" ng-change="updateFactions()"/> {{faction.label}}
            </label>
          </div>
        </div>
        <h4 ng-click="showSets = !showSets">Sets
          <span ng-if="sets.all.length != sets.selected.length"> &bull;</span></h4>
        <div id="sets" ng-show="showSets">
          <div class="mass-selector">
            <span ng-click="allSets();">All</span> | <span ng-click="noSets()">None</span> 
          </div>
          <hr class="filter-divider" />
          <div class="set" ng-repeat="set in sets.all">
            <hr  class="filter-divider" ng-show="sets.all[$index - 1] && (set.cycle != sets.all[$index - 1].cycle)" />
            <div class="checkbox">
              <label>
                <input type="checkbox" ng-model="set.selected" ng-change="updateSets()"/> {{set.label}}
              </label>
            </div>
          </div>
        </div>
        <h4 ng-click="showTypes = !showTypes;">Types
          <span ng-if="types.all.length != types.selected.length"> &bull;</span></h4>
        <div id="types" ng-show="showTypes">
          <div class="mass-selector">
            <span ng-click="allTypes()">All</span> | <span ng-click="noTypes()">None</span> 
          </div>
          <hr class="filter-divider" />
          <div class="checkbox" ng-repeat="type in types.all | filter:{side:currentSide}">
            <label>
              <input type="checkbox" ng-model="type.selected" ng-change="updateTypes()"/> {{type.label}}
            </label>
          </div>
        </div>
        <h4 ng-click="showSubtypes = !showSubtypes;">Subtypes
          <span ng-if="subtypes.all.length != subtypes.selected.length"> &bull;</span></h4>
        <div id="subtypes" ng-show="showSubtypes">
          <div class="mass-selector">
            <span ng-click="allSubtypes()">All</span> | <span ng-click="noSubtypes()">None</span> 
          </div>
          <hr class="filter-divider" />
          <div class="checkbox" ng-repeat="subtype in subtypes.all | filter:{side:currentSide} | subtypeOptions:types.selected track by subtype.value">
            <label>
              <input type="checkbox" ng-model="subtype.selected" ng-change="updateSubtypes()"/> {{subtype.label}}
            </label>
          </div>
        </div>
        <div id="reset">
          <span ng-click="resetAll()">Reset Filters</span>
        </div>
        <hr />
        <div id="small-print">
          <p>Version 1.0.0</p>
          <p>Images &amp; universe are intellectual property of <a href="https://www.fantasyflightgames.com">Fantasy Flight Games</a></p>
          <p>Data graciously provided by <a href="http://netrunnerdb.com/">NetrunnerDB</a></p>
        </div>
        <hr />
        <h3>Bugs</h3>
        <p>Subtypes overlapping - bioroid + clone are both runner and corp, but only runner ID, shows up in Corp ID list</p>
        <p>Caissa needs encoding properly, there's also a bad character in there too (ne line thing)</p>
        <hr />
        <h3>Todo</h3>
        <p>Cookies</p>
        <p>Consider more normal font on checkboxes</p>
        <p>Maybe space images a little more widely? Drop shadow?</p>
        <p>Use NRDB icons https://github.com/MWDelaney/Netrunner-Icon-Font</p>
        <p>consider ng-init</p>
        <p>break things up into separate controllers</p>
        <p>Cat Logo</p>
        <p>Favicon</p>
        <p>Google Analytics</p>
        <hr />
        <h3>Maybes</h3>
        <p>get direct link button</p>
        <p>Consider adding worth (x) agenda points cards into agenda sort/filter</p>
        <p>Number of subroutines</p>
        <p>Zoomed-in card view</p>
        <p>Divide up the cards somehow (during loop)</p>
        <p>Special actions, e.g. only show ICE</p>
      </div>
      
      <div id="cards" ng-controller="CardsCtrl">
        <div class="card-tile" ng-repeat="card in cards.display | orderBy:sort.current | sets:sets.selected | types:types.selected | subtypes:subtypes.selected | factions:factions.selected | filter:{title:search.term} | specialSort:sort.currentShorthand track by card.code">
          <img ng-src="http://netrunnerdb.com{{card.imagesrc}}" />
        </div>
      </div>
    </div>
  </body>
</html>